/*! suanliao */
define("bui/overlay",["bui/common","bui/overlay/overlay","bui/overlay/dialog","bui/overlay/message"],function(a){var b=a("bui/common"),c=b.namespace("Overlay");return b.mix(c,{Overlay:a("bui/overlay/overlay"),Dialog:a("bui/overlay/dialog"),Message:a("bui/overlay/message")}),b.mix(c,{OverlayView:c.Overlay.View,DialogView:c.Dialog.View}),b.Message=b.Overlay.Message,c}),define("bui/overlay/overlay",["bui/common"],function(a){var b=a("bui/common"),c=b.Component,d="x-align-arrow",e=c.UIBase,f=c.View.extend([e.PositionView,e.CloseView]),g=c.Controller.extend([e.Position,e.Align,e.Close,e.AutoShow,e.AutoHide],{renderUI:function(){var a=this,b=a.get("el"),c=a.get("arrowContainer"),d=c?b.one(c):b;a.get("showArrow")&&$(a.get("arrowTpl")).appendTo(d)},show:function(){function a(){"visibility"===e?d.css({display:"block"}):b.set("visible",!0),c.callback&&c.callback.call(b)}var b=this,c=b.get("effect"),d=b.get("el"),e=b.get("visibleMode"),f=c.effect,g=c.duration;switch(b.get("rendered")||(b.set("visible",!0),b.render(),b.set("visible",!1),d=b.get("el")),"visibility"===e&&(b.set("visible",!0),d.css({display:"none"})),f){case"linear":d.show(g,a);break;case"fade":d.fadeIn(g,a);break;case"slide":d.slideDown(g,a);break;default:a()}},hide:function(){function a(){"visibility"===b.get("visibleMode")&&d.css({display:"block"}),b.set("visible",!1),c.callback&&c.callback.call(b)}var b=this,c=b.get("effect"),d=b.get("el"),e=c.effect,f=c.duration;switch(e){case"linear":d.hide(f,a);break;case"fade":d.fadeOut(f,a);break;case"slide":d.slideUp(f,a);break;default:a()}}},{ATTRS:{effect:{value:{effect:"none",duration:0,callback:null}},closeable:{value:!1},showArrow:{value:!1},arrowContainer:{view:!0},arrowTpl:{value:'<s class="'+d+'"><s class="'+d+'-inner"></s></s>'},visibleMode:{value:"visibility"},visible:{value:!1},xview:{value:f}}},{xclass:"overlay"});return g.View=f,g}),define("bui/overlay/dialog",["bui/overlay/overlay"],function(a){var b=a("bui/overlay/overlay"),c=BUI.Component.UIBase,d="header-title",e=BUI.prefix,f=20,g=b.View.extend([c.StdModView,c.MaskView],{_uiSetTitle:function(a){var b=this,c=b.get("el");c.find("."+d).html(a)},_uiSetContentId:function(a){var b=this,c=b.get("body"),d=$("#"+a).children();d.appendTo(c)},_uiSetHeight:function(a){var b=this,c=a,d=b.get("header"),e=b.get("body"),g=b.get("footer");c-=d.outerHeight()+g.outerHeight(),c-=2*f,e.height(c)},_removeContent:function(){var a=this,b=a.get("body"),c=a.get("contentId");c?b.children().appendTo($("#"+c)):b.children().remove()}},{xclass:"dialog-view"}),h=b.extend([c.StdMod,c.Mask,c.Drag],{show:function(){var a=this;h.superclass.show.call(this),a.center()},bindUI:function(){var a=this;a.on("closeclick",function(){return a.onCancel()})},onCancel:function(){var a=this,b=a.get("cancel");return b.call(this)},_uiSetButtons:function(a){var b=this,c=b.get("footer");c.children().remove(),BUI.each(a,function(a){b._createButton(a,c)})},_createButton:function(a,b){var c=this,d='<button class="'+a.elCls+'">'+a.text+"</button>",e=$(d).appendTo(b);e.on("click",function(){a.handler.call(c,c,this)})},destructor:function(){var a=this,b=a.get("contentId"),c=a.get("body"),d=a.get("closeAction");"destroy"==d&&(a.hide(),b&&c.children().appendTo("#"+b))}},{ATTRS:{closeTpl:{view:!0,value:'<a tabindex="0" href=javascript:void("关闭") role="button" class="'+e+'ext-close" style=""><span class="'+e+'ext-close-x x-icon x-icon-normal">×</span></a>'},buttons:{value:[{text:"确定",elCls:"button button-primary",handler:function(){var a=this,b=a.get("success");b&&b.call(a)}},{text:"取消",elCls:"button button-primary",handler:function(){this.onCancel()!==!1&&this.close()}}]},contentId:{view:!0},success:{value:function(){this.close()}},cancel:{value:function(){}},dragNode:{valueFn:function(){return this.get("header")}},defaultLoaderCfg:{valueFn:function(){var a=this;return{property:"bodyContent",autoLoad:!1,lazyLoad:{event:"show"},loadMask:{el:a.get("body")}}}},title:{view:!0,value:""},mask:{value:!0},maskShared:{value:!1},headerContent:{value:'<div class="'+d+'">标题</div>'},footerContent:{},closeable:{value:!0},xview:{value:g}}},{xclass:"dialog"});return h.View=g,h}),define("bui/overlay/message",["bui/overlay/dialog"],function(a){function b(a,b){return function(d,f,g){BUI.isString(f)&&(g=f,f=null),g=g||b,f=f||e,c({buttons:a,icon:g,msg:d,success:f})}}function c(a){j.set(a),j.show()}function d(){var a=this,b=a.get("success");b&&(b.call(a),a.hide())}function e(){this.hide()}var f=a("bui/overlay/dialog"),g=BUI.prefix,h={info:"i",error:"×",success:'<i class="icon-ok icon-white"></i>',question:"?",warning:"!"},i=f.extend({renderUI:function(){this._setContent()},bindUI:function(){var a=this,b=a.get("body");a.on("afterVisibleChange",function(c){if(c.newVal&&BUI.UA.ie<8){var d=b.outerWidth();6==BUI.UA.ie&&(d=d>350?350:d),a.get("header").width(d-20),a.get("footer").width(d)}})},_setContent:function(){var a=this,b=a.get("body"),c=BUI.substitute(a.get("contentTpl"),{msg:a.get("msg"),iconTpl:a.get("iconTpl")});b.empty(),$(c).appendTo(b)},_uiSetIcon:function(){this.get("rendered")&&this._setContent()},_uiSetMsg:function(){this.get("rendered")&&this._setContent()}},{ATTRS:{icon:{},msg:{},iconTpl:{getter:function(){var a=this,b=a.get("icon");return'<div class="x-icon x-icon-'+b+'">'+h[b]+"</div>"}},contentTpl:{value:'{iconTpl}<div class="'+g+'message-content">{msg}</div>'}}},{xclass:"message",priority:0}),j=new i({icon:"info",title:""}),k=b([{text:"确定",elCls:"button button-primary",handler:d}],"info"),l=b([{text:"确定",elCls:"button button-primary",handler:d},{text:"取消",elCls:"button button-primary",handler:e}],"question");return i.Alert=k,i.Confirm=l,i.Show=c,i});